{% extends "base.html" %}

{% block title %}{{ section.title }} | {{ config.title }}{% endblock %}

{% block content %}
    {# Hero Section - Photo and Greeting side by side #}
    <section class="hero">
        <div class="hero__layout">
            <div class="hero__photo">
                <img src="{{ get_url(path='images/profile.jpg') }}" alt="{{ config.title }}" class="hero__image">
                {# Social Links #}
                <div class="social-links">
                    {% if section.extra.linkedin %}
                    <a href="{{ section.extra.linkedin }}" target="_blank" rel="noopener" class="social-links__item" aria-label="LinkedIn">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                        </svg>
                    </a>
                    {% endif %}
                    {% if section.extra.github %}
                    <a href="{{ section.extra.github }}" target="_blank" rel="noopener" class="social-links__item" aria-label="GitHub">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
                        </svg>
                    </a>
                    {% endif %}
                    {% if section.extra.scholar %}
                    <a href="{{ section.extra.scholar }}" target="_blank" rel="noopener" class="social-links__item" aria-label="Google Scholar">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5.242 13.769L0 9.5 12 0l12 9.5-5.242 4.269C17.548 11.249 14.978 9.5 12 9.5c-2.977 0-5.548 1.748-6.758 4.269zM12 10a7 7 0 1 0 0 14 7 7 0 0 0 0-14z"/>
                        </svg>
                    </a>
                    {% endif %}
                    {% if section.extra.email %}
                    <a href="mailto:{{ section.extra.email }}" class="social-links__item" aria-label="Email">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"/>
                        </svg>
                    </a>
                    {% endif %}
                </div>
            </div>
            <div class="hero__greeting">
                {% if section.extra.greeting_line_1 and section.extra.greeting_line_2 %}
                <h1 class="hero__title">
                    <span style="display: block;">{{ section.extra.greeting_line_1 | safe }}</span>
                    <span style="display: block;">{{ section.extra.greeting_line_2 }}</span>
                </h1>
                {% else %}
                <h1 class="hero__title">{{ section.title }}</h1>
                {% endif %}
            </div>
        </div>
    </section>

    {# Bio Section - Full width below #}
    <section class="bio">
        <div class="bio__content">
            {% if section.extra.bio_paragraphs %}
                {% for para in section.extra.bio_paragraphs %}
                <p>
                    {% if para.links %}
                        {{ para.text }}
                        <a href="{{ para.links[0].url }}" target="_blank" rel="noopener">{{ para.links[0].text }}</a>
                        and
                        <a href="{{ para.links[1].url }}" target="_blank" rel="noopener">{{ para.links[1].text }}</a>.
                    {% else %}
                        {{ para.text | safe }}
                    {% endif %}
                </p>
                {% endfor %}
            {% elif section.extra.bio %}
                <p>{{ section.extra.bio | safe }}</p>
            {% endif %}
        </div>
    </section>

    {# Education Section #}
    {% if section.extra.education %}
    <section class="education">
        <h2 class="education__title">Education</h2>
        <ul class="education__items">
            {% for edu in section.extra.education %}
            <li class="education__item">
                <span class="education__degree">{{ edu.degree }}</span>
                <span class="education__details">
                    <span class="education__institution">{{ edu.institution }}</span>
                    <span class="education__year">
                        {% if edu.year_end %}
                            {{ edu.year_start }}–{{ edu.year_end }}
                        {% else %}
                            {{ edu.year_start }}–Present
                        {% endif %}
                    </span>
                </span>
            </li>
            {% endfor %}
        </ul>
    </section>
    {% endif %}

    {# Recent Publications Section #}
    {% set publications = get_section(path="publications/_index.md", metadata_only=false) %}
    {% if publications.pages %}
    <section class="publications">
        <h2 class="publications__title">Recent Publications</h2>
        <ul class="publications__items">
            {% for pub in publications.pages | sort(attribute="date") | reverse | slice(end=5) %}
            <li class="publications__item">
                <div class="publications__citation">
                    <a href="{{ pub.permalink }}" class="publications__link">{{ pub.title }}</a>
                    <span class="publications__meta">
                        {% if pub.extra.authors %}{{ pub.extra.authors | replace(from="Anand, Vivek", to="<strong class='author-me'>Anand, Vivek</strong>") | safe }}. {% endif %}
                        {% if pub.extra.venue %}<em>{{ pub.extra.venue }}</em>, {% endif %}
                        {{ pub.date | date(format="%Y") }}.
                    </span>
                </div>
                <div class="publications__actions">
                    {% include "partials/pub-buttons.html" %}
                    {% if pub.extra.award %}
                    <span class="pub-award">
                        <svg viewBox="0 0 24 24"><path d="M12 2L9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2z"/></svg>
                        {{ pub.extra.award }}
                    </span>
                    {% endif %}
                    {% if pub.taxonomies.tags %}
                    <div class="publications__tags">
                        {% for tag in pub.taxonomies.tags %}
                        <a href="{{ get_taxonomy_url(kind='tags', name=tag) }}" class="tag tag--small">{{ tag }}</a>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
            </li>
            {% endfor %}
        </ul>
        {% if publications.pages | length > 5 %}
        <p class="publications__see-all">
            <a href="{{ get_url(path='@/publications/_index.md') }}">View all {{ publications.pages | length }} publications &rarr;</a>
        </p>
        {% endif %}
    </section>
    {% endif %}

    {# Latest Posts Section #}
    {% set blog = get_section(path="blog/_index.md") %}
    {% if blog.pages %}
    <section class="post-list">
        <h2 class="post-list__title">Latest Posts</h2>
        <ul class="post-list__items">
            {% for post in blog.pages | slice(end=5) %}
                <li class="post-list__item">
                    <a href="{{ post.permalink }}" class="post-list__link">{{ post.title }}</a>
                    <time class="post-list__date">{{ post.date | date(format="%b %d, %Y") }}</time>
                </li>
            {% endfor %}
        </ul>
    </section>
    {% endif %}
{% endblock %}